body.is-color-mode-changing
    *
        transition-duration: 0s !important

main:not(.page-with-blocks, .page-with-map),
body[class*="__section"] main
    padding-bottom: 0

.document-content > .blocks .block:first-child
    &[class*="--accent_background"],
    &[class*="--alt_background"]
        margin-top: var(--grid-gutter) !important

main:not(.page-with-blocks)
    margin-bottom: var(--block-space-y)

.ancestor-ending-with-full-width-pages 
    @include media-breakpoint-up(desktop)
        main
            margin-bottom: space(24)

// BLOCKS
// title's arrow
.block
    .top
        margin-bottom: var(--heading-margin-bottom)
    .block-title a::after
        content: none
    .page .more::after,
    .post .more::after
        content: "→"
        font-family: $heading-font-family
        font-size: 110%
        margin-left: space()
    .post
        &-content
            align-items: flex-start
    .post .more,
    .call_to_action .actions a
        &::after
            content: "→"
            display: inline-block
            font-family: $heading-font-family
            font-size: 110%
            margin-left: space(2)
            text-decoration: none
            transition: transform 0.3s ease
            vertical-align: middle
        &:hover::after
            transform: translateX(10px)
    [class$="-title"]
        max-width: 100%


// remove margin between two alt/accent blocks following each other
.block[class*="--alt_background"],
.block-chapter--accent_background,
.block-class-background-alt
    + .block-class-background-alt
        margin-top: 0

// block with extendable grid (grid varies to suit item's number)
@mixin extendable-list($list: '> ul')
    @include in-page-without-sidebar
        #{$list}
            display: flex
            flex-wrap: wrap
            > li 
                width: columns(4)
                @each $items, $columns in (1: 6, 2: 6, 4: 3, 7: 3, 8: 3)
                    &:first-child:nth-last-child(#{$items}),
                    &:first-child:nth-last-child(#{$items}) ~ li
                        width: columns($columns)

// no block should stick to footer
main
    .blocks
        .block[class*="--alt_background"]
            + .block-class-background-alt
                margin-top: 0
                .block-content
                    padding-top: 0
        .block:last-child:is([class*="--accent_background"],
        [class*="--alt_background"],
        .block-timeline--horizontal,
        .block-pages--cards)
            margin-bottom: var(--grid-gutter)

.container.children-categories
    ul
        row-gap: $spacing-1
        a:hover
            text-decoration: underline

.more
    &::after
        content: "→" !important
        font-family: $heading-font-family !important
        margin-left: space()
    &.meta
        @include meta
        text-decoration: none
